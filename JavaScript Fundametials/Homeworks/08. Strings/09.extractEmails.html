<html>

<head>
    <title>Strings homework</title>
	<link href="styles/js-console.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="styles/styles.css">
</head>

<body>
    <header>
        <h1> 
            Write a function for extracting all email addresses from given text. All substrings that match the format &lt;identifier&gt;@&lt;host&gt;…&lt;domain&gt; should be recognized as emails. Return the emails as array of strings.
        </h1>  
        <h2>
            Please contact us by phone (+359 222 222 222) or by email at exa_mple@abv.bg or at baj.ivan@yahoo.co.uk . This is not email: test@test. This also: @telerik.com. Neither this: a@a.b.
        </h2>     
    </header>
    <div>
        <label for = "someString"> Input text with emails in it </label>
        <input type = "text" id = "someString" class = "task4">  

        <button onclick="extractEmails(document.getElementById('someString').value)">Replace</button> 
    </div>

	<div id="js-console"></div>				 
	<script src="scripts/js-console.js"></script>
    <script src="scripts/stringFormat.js"></script>
	<script>
		/* Task 9. Write a function for extracting all email addresses from given text. All substrings that match the format <identifier>@<host>…<domain> should be recognized as emails. Return the emails as array of strings.
        */

        function extractEmails(someString) {
            var emails = someString.replace(/(,)/g, ' ').replace(/(!)/g, ' ').replace(/(\?)/g, ' ').replace(/(-)/g, ' ').replace(/(=)/g, ' ').replace(/(:)/g, ' ').replace(/(;)/g, ' ').split(' '),
                index = 1,
                i;

            // then we loop
            for (i = 0; i < emails.length; i++) {
                if (validateEmail(emails[i])) {
                    // then we check if it's email to be email it has to have 2 to 50 chars then @ then 2 to 20 chars then . and then 2 to 6 chars, if so - print
                    jsConsole.writeLine(String.format("Email[{0}] - {1}", index, emails[i])); 
                    index++;
                }    
            }
        }

        function validateEmail(email) { 
            var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        } 
	</script>
</body>

</html>
